202203282012
***

***

***
[ссылка](https://www.digitalocean.com/community/tutorials/initial-server-setup-with-debian-9)
***
# 1. вход в систему как root
Чтобы войти на свой сервер, вам нужно знать общедоступный IP-адрес вашего сервера. Вам также понадобится пароль или, если вы установили ключ SSH для аутентификации, закрытый ключ для учетной записи пользователя root. Если вы еще не вошли на свой сервер, вы можете следовать нашему руководству о том, как подключиться к вашей капле с помощью SSH, которое подробно описывает этот процесс.

Если вы еще не подключены к своему серверу, войдите в систему как пользователь root, используя следующую команду (замените выделенную часть команды общедоступным IP-адресом вашего сервера):
```
ssh root@your_server_ip
```
Примите предупреждение о подлинности хоста, если оно появится. Если вы используете аутентификацию по паролю, укажите свой пароль *root* для входа в систему. Если вы используете ключ SSH, защищенный парольной фразой, вам может быть предложено ввести парольную фразу при первом использовании ключа в каждом сеансе. Если вы впервые входите на сервер с паролем, вам также может быть предложено изменить пароль *root*.

## О Root
Пользователь *root* — это пользователь-администратор в среде Linux с очень широкими привилегиями. Из-за повышенных привилегий учетной записи *root* вам *не рекомендуется* использовать ее на регулярной основе. Это связано с тем, что часть силы, присущей учетной записи *root*, заключается в возможности вносить очень разрушительные изменения, даже случайно.  
  
Следующим шагом является настройка альтернативной учетной записи пользователя с ограниченной сферой влияния для повседневной работы. Мы научим вас, как получить повышенные привилегии в то время, когда они вам нужны.

Следующим шагом является настройка альтернативной учетной записи пользователя с ограниченной сферой влияния для повседневной работы. Мы научим вас, как получить повышенные привилегии в то время, когда они вам нужны.

# 2. создание нового пользователя
После того, как вы вошли в систему как пользователь *root*, мы готовы добавить новую учетную запись пользователя, которую мы будем использовать для входа в систему.
***
*Примечание*
В некоторых средах пакет `unscd` может быть установлен по умолчанию, чтобы ускорить запросы к серверам имен, таким как LDAP. Самая последняя версия, доступная в настоящее время в Debian, [содержит ошибку](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=844447), из-за которой некоторые команды (например, команда `adduser` ниже) создают дополнительный вывод, который выглядит следующим образом:
```
sent invalidate(passwd) request, exiting
sent invalidate(group) request, exiting
```
Эти сообщения безобидны, но если вы хотите их избежать, безопасно удалить пакет *unscd*, если вы не планируете использовать такие системы, как LDAP, для получения информации о пользователях:
```
apt remove unscd
```
***
В этом примере создается новый пользователь с именем **sammy**, но вы должны заменить его на имя пользователя, которое вам нравится:
```
adduser sammy
```
Вам будет задано несколько вопросов, начиная с пароля учетной записи.  
  
Введите надежный пароль и, при желании, укажите любую дополнительную информацию, если хотите. Это не обязательно, и вы можете просто нажать ENTER в любом поле, которое хотите пропустить.

# 3. Предоставление административных привилегий
Теперь у нас есть новая учетная запись пользователя с обычными привилегиями. Однако иногда нам может потребоваться выполнение административных задач.  
  
Чтобы избежать необходимости выходить из нашего обычного пользователя и снова входить в систему с учетной записью *root*, мы можем настроить то, что известно как «суперпользователь» или привилегии *root* для нашей обычной учетной записи. Это позволит нашему обычному пользователю запускать команды с правами администратора, помещая слово sudo перед каждой командой.  
  
Чтобы добавить эти привилегии нашему новому пользователю, нам нужно добавить нового пользователя в группу **sudo**. По умолчанию в Debian 9 пользователям, принадлежащим к группе **sudo**, разрешено использовать команду **sudo**.  
  
От имени пользователя *root* выполните эту команду, чтобы добавить нового пользователя в группу sudo (замените выделенное слово новым пользователем):
```
usermod -aG sudo sammy
```
Теперь, когда вы вошли в систему как обычный пользователь, вы можете ввести **sudo** перед командами для выполнения действий с правами суперпользователя.

# 4. настройка базового брандмауэра
Серверы Debian могут использовать брандмауэры, чтобы разрешить подключение только к определенным службам. Хотя брандмауэр iptables установлен по умолчанию, Debian настоятельно не рекомендует какой-либо конкретный брандмауэр. В этом руководстве мы установим и будем использовать брандмауэр UFW, чтобы устанавливать политики и управлять исключениями.  
  
Мы можем использовать диспетчер пакетов `apt` для установки UFW. Обновите локальный индекс, чтобы получить последнюю информацию о доступных пакетах, а затем установите брандмауэр, набрав:
```
apt update
apt install ufw

```
*Примечание.* 
Если ваши серверы работают в *DigitalOcean*, вы можете дополнительно использовать [облачные брандмауэры DigitalOcean](https://www.digitalocean.com/community/tutorials/an-introduction-to-digitalocean-cloud-firewalls) вместо брандмауэра UFW. Мы рекомендуем использовать только один брандмауэр за раз, чтобы избежать конфликтующих правил, которые могут быть трудны для отладки.