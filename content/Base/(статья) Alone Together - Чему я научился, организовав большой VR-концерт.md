202312121509
***
[[TonyVT SkarredGhost]]
***
https://skarredghost.com/2020/07/04/how-to-organize-vr-concert-lessons/
***
21 июня в рамках фестиваля French Music Fest состоялся концерт в виртуальной реальности, организованный легендой электронной музыки Жаном-Мишелем Жарром. Это событие, получившее название "Alone Together", имело настоящий успех: сотни тысяч людей следили за его прямой трансляцией на Youtube и Facebook, а тысячи людей посетили его в VR на VRChat.

Мне выпала честь быть одним из участников этого проекта, организованного VRrOOm, и для меня это был первый раз, когда я организовывал что-то, что смотрело так много людей вместе. Я многому научился в процессе, и я хочу поделиться с вами тем, что происходило за занавесом, удовлетворить некоторые из ваших любопытств, преподать вам некоторые уроки и заставить вас немного посмеяться.

*Немного предыстории...*
Позвольте мне рассказать вам, как родился этот проект. В конце мая Луи Каччуттоло из VRrOOm связался со мной и Лапо Джермази из MID Studio, чтобы рассказать, что он обсуждал с министром культуры Франции мероприятие в VR для французского Fête de la Musique, инициативы, которая проводится каждый год в честь музыки во Франции. Поскольку в настоящее время все концерты запрещены из-за коронавируса, министр искал новые способы проведения мероприятия, и Луи предложил ему сделать мероприятие полностью в VR. VRrOOm уже несколько месяцев инвестирует в организацию художественных мероприятий и живых выступлений поверх VRChat вместе со мной и MID, и вот Луи предложил министру организовать виртуальный концерт с французским артистом полностью в VRChat, а также кое-что сделать в реальном мире, чтобы преодолеть разрыв между виртуальным и реальным.

Все это звучало очень круто, но была небольшая проблема: 21 июня был Музыкальный Фест, и у нас было меньше месяца на организацию такой большой инициативы. Учитывая бюрократические сроки, необходимые министру для утверждения проекта, это время сократилось еще больше, дав нам примерно 3 недели на организацию полноценного музыкального фестиваля в VR. Звучит удивительная, но совершенно безумная миссия, кто был бы настолько глуп, чтобы участвовать в ней? Причислите меня, конечно!

*Alone Together*
Луи начал собирать людей для проекта, который должен был быть реализован с безумной скоростью. Прежде всего ему нужно было найти звезду шоу: музыкальный фестиваль без известного артиста был бы довольно скучным. Получив несколько «нет», Луи удалось подписать контракт с легендой электронной музыки Жаном-Мишелем Жарром, известным как пионер электронной музыки 70-х и 80-х годов. Луи очень страстный человек, и когда он сказал нам, что JMJ будет частью нашего шоу, в его глазах загорелся яркий свет волнения. Тот же свет присутствовал в глазах других людей во время звонков через Zoom, которые мы позже провели с художником, в то время как я был больше похож на...

![[Танос.webp|500]]

Найдя звезду, пришло время создать команду, которая могла бы реализовать проект, поэтому Луи (кроме меня и MID Studio) связался с цифровым художником Пьяре (Пьер Фрике), чтобы тот стал арт-директором проекта, и Винсентом Массоном, чтобы создать весь визуал для шоу, Георгий Молодцов для помощи в организации мероприятия, особенно для стриминговой части. Позже появилось много других талантливых людей и компаний: Жан-Батист Фрике, SoWhen?, Atelier Daruma с режиссёром Матиасом Челебуром, Seekat, MindOut, Урсула Гляйснер и, конечно же, поддержка ведущей VRChat.

Группа сумасшедших людей три недели упорно работала над проектом, который назвали Alone Together, чтобы подчеркнуть тот факт, что это было мероприятие, где все люди наслаждались музыкой вместе, находясь дома в изоляции из-за коронавируса. Все происходило в VRChat, но в то же время была создана физическая инсталляция в Palais-Royal в Париже, где некоторые люди могли наслаждаться шоу, а затем виртуально общаться с Жан-Мишелем Жарром, задавая ему вопросы, чтобы создать мост между реальным и виртуальным миром.

Что касается виртуальной реальности, то идея заключалась в том, чтобы создать нечто вроде большого виртуального концерта с анимацией и визуальными эффектами, которые невозможны в реальной жизни и к которым каждый мог бы присоединиться, не выходя из дома. Суперкруто, не правда ли? Да, это так!

**Совместная работа в одиночку**

Могу сказать, что мне очень повезло работать над этим проектом с группой талантливых людей из многих стран (Италии, России, Франции и т. д.). Но в то же время я понял, что когда над одним проектом удаленно работают 15-20 человек, невозможно сохранить ту же свободную организацию, что и при работе 2-3 человек в одном офисе. Поэтому позвольте мне дать вам несколько предложений для будущих VR-мероприятий, которые вы можете организовать.

(Этот раздел статьи больше посвящен управлению проектами... если он покажется вам скучным, вы можете пропустить его и перейти непосредственно к разделу технических деталей)

**Учитывайте время**

Каждое мероприятие требует определенного времени на организацию, но запомните это простое правило: сколько бы времени вы ни считали необходимым, оно будет больше, намного больше. Я организовал семинар за 1 неделю, а этот концерт - за 3 недели, но на самом деле "не пытайтесь сделать это дома", как говорит WWE.

Мероприятия требуют времени на планирование, проведение, тестирование. Если у вас нет времени, все пойдет насмарку. Все ошибки, о которых я расскажу ниже, связаны не с тем, что мы были неспособны, а с тем, что на организацию такого амбициозного проекта отводилось безумное время - 3 недели. Итак, планируйте заранее: для проведения подобного концерта в VR необходимо, вероятно, не менее 2 месяцев, чтобы подготовить его хорошо и без спешки. Для простого мероприятия (например, небольшой конференции с 50 участниками и 2 спикерами) нужно 2 недели. Для такого крупного мероприятия, как Educators in VR Summit, я бы предложил не менее 4 месяцев подготовки. Оцените, сколько времени вам потребуется, и не пытайтесь сделать все быстрее.

Не торопитесь, иначе, во-первых, вы не успеете организовать мероприятие должным образом, и в нем появятся ошибки или проблемы. И тогда люди, работающие над ним, будут испытывать сильный стресс и, возможно, начнут ссориться (чего, к счастью, не было в нашем опыте, но было в других спешных проектах) или перегорать. Работать все ночи напролет вредно для здоровья, поверьте мне, так что избегайте этого. Бывало, бывало.

Ах, конечно, последняя неделя всегда будет сумасшедшей, и вы будете работать день и ночь, чтобы прояснить последние детали, но убедитесь, что это будет всего одна неделя, а не больше.

**Наймите Project менеджера**

Если ваш проект достаточно велик, либо у вас есть менеджер проекта, либо у вас будут большие проблемы. Мы спешили, у нас был ограничен бюджет, и мы начали делать что-то, не задумываясь о найме менеджера проекта, но позже пожалели об этом выборе.  
  
Это один из уроков, который я хочу вам преподать: как бы вы ни торопились, насколько у вас ограничен бюджет, если в вашем проекте задействовано более 5 человек, и они не работают в одном и том же месте, наймите менеджер проекта. Если этого не произойдет, вы:

-отсутствие четких сроков (помимо даты доставки);
-отсутствие координации между командами;
-никто не имеет четкого представления о происходящем и не может заставить всех людей работать как винтики большого механизма.

Менеджер проекта - это как дирижер в оркестре. Со стороны он может показаться совершенно бесполезным, но на самом деле именно он гарантирует оптимальную работу команды. Если бы его не было в нашей команде, вот что произошло:

-каждый из нас не имел точного представления о том, чем занимаются остальные участники;
-каждый из нас не всегда имел четкий список своих задач. Иногда мне приходилось понимать, что я должен делать, читая различные чаты, где все, что нужно было сделать, было разбросано немного здесь и немного там в разговоре с другими людьми;
-с первого дня у нас не было четкого представления о сроках. Каковы были вехи проекта? На какой день? И какие функции должны быть отменены, если мы опоздаем на веху? Все это было не очень понятно;
-мы не всегда знали, к кому обращаться, если у нас возникали какие-то проблемы;
-не было четко определено время, когда необходимо звонить для обновления статуса, проведения совещаний и т.д.

К счастью, мы все были очень профессиональными людьми, и нам удалось справиться с задачей даже без PM, но, оглядываясь назад, я думаю, что это был не самый удачный выбор с нашей стороны. У нас было бы меньше головной боли, если бы кто-то на высоком уровне представлял себе, что происходит, и координировал всех нас. Примите это как фундаментальный совет.

**Напишите четкие спецификации, затем разработайте и затем протестируйте**

Писать спецификации скучно, но необходимо. Кто-то должен подготовить один или несколько документов, которые станут руководством для всех членов команды. Без этого все пойдет насмарку. Документы должны быть ясными и четко сформулированными. А после написания они должны меняться как можно реже.

Теоретически, вы должны написать спецификации, затем получить их одобрение от лиц, принимающих решения, после чего все могут приступить к разработке, а затем, наконец, провести тестирование и отшлифовать, что может потребовать переделки некоторых частей проекта. Если не следовать этому методу, организация становится еще более запутанной. Из-за нехватки времени различные части этой идеальной схемы накладывались друг на друга, поэтому некоторые вещи были изменены уже после разработки, что привело к потере времени, а этап тестирования был очень незначительным, что создало проблемы, как мы увидим позже. Постарайтесь следовать этой простой структуре, когда что-то делаете.

**Будьте осторожны со Slack**

Еще один небольшой совет - попросите свою команду разумно использовать чаты Slack. Slack и подобные средства являются основополагающими для общения между членами команды, но они также могут стать проблемой, если использовать их неправильно. Несколько советов из моего опыта работы в этом и других проектах:

-не используйте slack для передачи новых спецификаций проекта. Каждый член команды должен иметь доступ к документу спецификации (или нескольким документам), к которому он должен обратиться, чтобы понять, что он должен делать. Если все задачи и решения разбросаны по чатам Slack, каждый должен прочитать все чаты, чтобы восстановить точные задачи, а это чревато тем, что часть информации будет утеряна;
-попросите членов команды уважать тему чата: если чат посвящен "3D", я, как разработчик, никогда не должен его читать. Если мне придется читать все чаты, это будет большой потерей времени, а также приведет к путанице;
-не пишите слишком много. Если утром члены вашей команды войдут в систему и найдут 1000 неразобранных сообщений, оставленных накануне вечером, они либо потратят много времени на их прочтение, либо просто проигнорируют их все, пропустив важную информацию.

Много раз я пропускал все уведомления в Slack, потому что мне приходилось выбирать между тем, чтобы потратить время на их прочтение или на разработку проекта. Я часто просил своего друга Лапо Джермаси: "Эй, парень, можешь сделать мне сводку последних 1000 сообщений в Slack?", и он был достаточно любезен, чтобы помочь мне быть в курсе всей информации. Используйте Slack с умом, иначе он только внесет путаницу.

Для другого большого проекта я сейчас использую Microsoft Teams, и мне нравится, что в Teams каждый канал делится на потоки, которые начинаются с одного сообщения, так что проще сразу пропустить все сообщения, которые кажутся неинтересными, начиная с первого сообщения в потоке. Но это не решает всех проблем и может быть еще хуже, если люди неправильно управляют механизмом потоков.

**Попросите помощи у хозяина**

Если вы не используете свою платформу, постарайтесь наладить более тесные отношения с компанией, стоящей за платформой, которую вы используете. В этом случае мы поступили очень правильно и обратились к компании VRChat, которая оказала нам поддержку: помогла решить некоторые технические проблемы и обеспечила широкую известность мероприятия, разместив его на всех своих порталах. Спасибо VRPill за все, что вы для нас сделали!

Конечно, для этого нужно провести мероприятие, значимое для самой платформы. Если вы организуете встречу для поклонников всплывающего окна "Видео приостановлено. Вы все еще смотрите?" на Youtube, которых, возможно, 3 человека на всей Земле, то ни одной платформе не будет до вас дела. Но если вы организуете мероприятие с очень крутой темой (например, инновационное художественное представление) или одним или несколькими VIP-гостями (певцы, актеры, ведущие технологические лидеры и т. д.), платформы наверняка захотят услышать о вас. Помните, что мы находимся на ранних этапах развития VR, и эти платформы ищут интересные события и сценарии использования, чтобы выжить, поэтому им понравится любая крутая инициатива, которую вы можете им предложить. Не стесняйтесь и отправьте письмо!

**Технические секреты, скрывающиеся за концертом**

Некоторые люди просили меня раскрыть технические секреты этого замечательного концерта, и, будучи ведущим разработчиком концерта, парнем, загрузившим финальный VRChat-мир, чтобы остальные могли насладиться им, я думаю, что я подходящий человек, чтобы рассказать вам некоторые сочные технические подробности о том, как мы пытались решить некоторые проблемы, где мы преуспели, где мы потерпели неудачу.

**Почему именно VRChat?**

Первый вопрос, который вы можете нам задать, - почему мы выбрали VRChat несколько месяцев назад, когда мы начали приключение VRrOOm Events. Существует множество других социальных VR-пространств (Altspace, ENGAGE, Sansar и т. д.), и мне нравятся многие из них, так почему же VRChat?

Причины в основном такие:

-VRChat очень популярен, гораздо больше, чем все остальные вместе взятые, так что у публичного мира на нем потенциальная база пользователей больше, чем на других платформах. Sansar, например, очень амбициозный проект, но у него мало онлайн-пользователей каждый день, поэтому что бы вы там ни делали, это будет малозаметно каждый день (я имею в виду, что вы можете провести там успешное мероприятие, как Lost Horizon, но трудно сделать успешную постоянную инсталляцию);

-Вы можете настроить все в VRChat, разрабатывая в Unity. У вас могут быть свои 3D-модели для аватаров, вы можете создавать свои 3D-окружения, кодировать пользовательские взаимодействия. И все это с помощью Unity, инструмента, который я уже использую каждый день. Это нечто чрезвычайно мощное, что предлагают очень немногие другие системы.

-VRChat knows de wei.

-Это не значит, что VRChat обязательно будет лучшим решением для ваших мероприятий: у каждого мероприятия свои требования. Например, для семинара я бы выбрал ENGAGE, потому что он лучше модерирует аудиторию и поддерживает PPTX. Для повторяющегося мероприятия по стендап-комедии я бы выбрал Altspace, потому что у него лучше инструменты для сообщества. И так далее. Вы должны знать о доступных средах и выбрать лучшую для вас. Свяжитесь с нами, если вам нужно организовать мероприятие и вы не знаете, что выбрать 🙂 .

**Размещение тысяч людей в VRChat**

Самая большая проблема, которая преследовала нас все это время, - как сделать концерт доступным для тысяч людей. Жан-Мишель Жарр очень популярен, и наверняка многие хотели стать частью его грандиозного концерта. Но все социальные VR-миры, что бы они ни говорили, не могут вместить много людей в одной комнате. В ENGAGE может быть только 50, в VRChat - 40, в Mozilla Hubs - 25. Только Somnium Space и Virbela могут дать вам сотни людей вместе. Как же сделать так, чтобы тысячи людей смогли насладиться VR-концертом JMJ?

VRChat всегда разрешает 40 человек для каждого экземпляра мира, и каждый человек может быть только в одном единственном экземпляре. Если вы не знакомы с терминологией VRChat: вы можете опубликовать мир в VRChat, но "мир" - это как штамп для создания различных клонов самого себя: фактически, когда вы выбираете мир, например "The Void", вы не входите в мир, но вы можете войти в инстанс, клон, этого мира. Все люди, входящие в мир, на самом деле находятся внутри разных его инстансов, а весь "мир" - это просто ссылка для всех них. Эти экземпляры совершенно не связаны между собой, поэтому то, что происходит в одном из них, не может повлиять на другие. Вы даже не знаете, сколько экземпляров будет создано и сколько в них будет людей: кто-то может создать новый экземпляр и остаться там в одиночестве, потому что ненавидит других людей. Некоторые инстансы будут публичными, другие - более закрытыми. Так что, по сути, все будет совершенно случайно.

Мы приложили все усилия, чтобы найти наилучший компромисс, чтобы концерт понравился всем людям во всех случаях. Помните, что из-за ограничений социальных VR-платформ вы всегда должны находить компромиссы между тем, что вы хотите, и тем, что вы можете получить, поэтому будьте готовы найти обходные пути для всего.

Мы придумали этот мастер-план:

-40 человек попали бы в главную инстанцию, в которой находились все мы, организаторы, и Жан-Мишель Жарр. Это был бы "VIP" зал, где собрались бы важные персоны VR и музыкальных ландшафтов. Это был бы "главный" концертный зал, где мы бы контролировали все исполнение для идеального впечатления от концерта;

-Все остальные люди в VRChat получили бы доступ к автоматизированным мирам с живой музыкой. Мы получили много критики по этому поводу, потому что кто-то думал, что мы создали только одну комнату с настоящим концертом, а многие другие - с поддельным концертом низкого качества. Причина в том, что технически невозможно контролировать все экземпляры одного мира вместе. JMJ может находиться только в одном из экземпляров, а не в каждом из них. И мы не могли контролировать все экземпляры, которые были бы созданы для запуска анимации и видео, потому что их было слишком много и они были совершенно непредсказуемы по количеству и времени (новые экземпляры порождались и уничтожались каждую минуту). Мы не хотели оставлять концерт в VRChat доступным только для 40 человек, и поэтому попытались найти лучший способ предложить наибольшему количеству людей хороший VR-опыт (пусть и не такой оптимальный, как в главной VIP-комнате). Это был способ демократизировать концерт. Кроме того, мы не хотели выкладывать все в виде заранее записанного концерта, потому что хотели предложить живой опыт, чтобы все "были вместе" и слушали одну и ту же живую музыку. JMJ должен был транслироваться через Youtube в виде двухмерного голографического аватара с заранее записанными анимациями во всех случаях, чтобы обеспечить хороший опыт для всех;

-Все люди в мобильном могли бы смотреть трансляцию на Youtube/Facebook и наслаждаться концертом в 2D.

**Tracking the artist**

VRChat позволяет вам использовать все свое тело только через трекеры Vive или через программы вроде Driver4VR, которые эмулируют трекеры через драйверы SteamVR. Проблема, когда вы не владеете платформой, заключается в том, что вы должны следовать ее правилам, поэтому мы были вынуждены использовать трекеры Vive или эквивалентное оборудование.

Первоначально предлагалось использовать несколько Kinects для эмуляции трекеров, но, использовав Kinects в VR в течение 3 лет в своем первом стартапе, я предупредил людей, что времени на их использование недостаточно, и в итоге оказался прав. Даже с Optitrack возникли проблемы: Optitrack идеально подходит для отслеживания тела, но в вашем пользовательском приложении. В VRChat вы не можете напрямую предоставить суставы тела, а можете только эмулировать положение виртуальных трекеров Vive. Таким образом, требовалось выполнить отслеживание в Optitrack, а затем эмулировать трекеры Vive с учетом данных, предлагаемых Optitrack, чтобы скелет, используемый VRChat, мог показать приятную позу тела. Думаю, понятно, что это довольно сложно, а поскольку мы были ограничены во времени, то не смогли применить эти крутые решения с желаемым качеством.

Поэтому, после различных тестов, специалисты по трекингу решили использовать трекеры Vive. Мудрое решение: если вы торопитесь, идите по самому безопасному пути.

**Streaming the audio**

У Жана-Мишеля был свой аватар, и он должен был играть свою музыку. Но как включить музыку в VRChat?

Самый распространенный вариант среди сообщества - это подача музыки через линейный вход (микрофон) компьютера, как голос аватара. Но когда мы тестировали этот вариант, Луис сказал нам, что качество музыки не достаточно хорошо для такого высокопоставленного лица, как JMJ. Другим вариантом была трансляция голоса через Youtube или что-то подобное, но Youtube вводит что-то вроде 30-секундной задержки, и поэтому движения аватара JMJ и музыка, которую он играл, не были бы синхронизированы. Этот путь также оказался нежизнеспособным.

Благодаря огромной работе Георгия Молодоцова мы нашли инструмент под названием TopazChat, разработанный японцем Хиротоши, который обеспечивал сверхбыструю высококачественную потоковую передачу звука для VRChat. Он работает как шарм и сделал наш концерт возможным. Если вам нужно подобное решение, я искренне советую вам обратить внимание на TopazChat.
https://booth.pm/ja/items/1752066

```
https://twitter.com/Lyuma2d/status/1735240861460701380

К сожалению, VRC ничего не сделал для того, чтобы Topaz Chat попал в белый список: [https://feedback.vrchat.com/feature-requests/p/add-topazchat-to-whitelist](https://t.co/XribfmqoCS) Пока не будет больше прозрачности или действий в процессе внесения в белый список, нам все равно необходимо включить «Разрешить ненадежные URL-адреса», чтобы посещать мероприятия JP.
```

**Потоковое воспроизведение фонового видео**

Транслировать фоновые 360-видео было гораздо проще, поскольку VRChat предлагает множество инструментов уже из коробки, а также вы можете использовать другие инструменты из Unity. Здесь нужно лишь решить, нужна ли вам синхронизация и какое разрешение вы хотите. Это очень просто сделать, и мне нет необходимости вдаваться в подробности.

**Запуск анимации**

Давайте перейдем к болевой точке опыта, который многие люди испытывали в публичном мире. У нас был JMJ, который в VIP-мире представлял собой 3D-аватар со звуком, поступающим из TopazChat, а в публичном мире - 2D-аватар, транслируемый через Youtube. У нас было 3D-окружение, разработанное Винсентом Массоном и оптимизированное Виктором Пуховым из MID. У нас были забавные фоновые видео, созданные Винсентом Массоном. У нас даже была 3D-анимация, разработанная Винсентом и оптимизированная Виктором. Теперь настало время собрать все это воедино.

Идея концерта заключалась в том, чтобы на каждую песню Жана-Мишеля Жарра активировать разное фоновое видео и разную 3D-анимацию летающих объектов, чтобы создать особую дискотеку с триппи-визуальными эффектами, синхронизированными с песней. Но как это сделать?

**VIP-мир**
VRChat не распознает песни и не мог активировать все автоматически для каждой песни. Поставить таймер тоже было невозможно, потому что у JMJ могли быть задержки, он мог захотеть говорить немного дольше между каждой песней, поэтому мы не могли жестко закодировать анимацию. Единственным способом было запускать их вручную.

Мы создали специальную комнату для виджея, которая находилась на самом верху танцевального зала, с панелью виджея, которая представляла собой текстуру с рендерингом только передней части: это означало, что виджей (Георгий) мог видеть ее, но люди внизу, танцующие на полу, не могли ее видеть. На панели виджея были все триггеры VRChat, необходимые для запуска различных видео, запуска различных анимаций и управления всем. Георгий и другие люди разработали точный график, когда что активировать, и он был там каждую минуту, нажимая кнопки, чтобы двигать части сцены, активировать 3D-анимацию, 360-видео и так далее. После нескольких репетиций он стал очень практичным в использовании этого инструмента и был идеальным диджеем на всем мероприятии.

Ощущения в VIP-зале были настолько крутыми, потому что он был разработан в точном соответствии с таймингом, и все присутствующие могли наслаждаться концертом так, как он был задуман, с каждой песней, дарящей правильные аудиовизуальные ощущения.

https://youtu.be/I6kZQ5nW9zw?si=aVwBBCvkoh7ZdKfD

**Public worlds**

К сожалению, в публичных мирах мы не смогли предложить такой же потрясающий опыт. Причина в том, что дизайн VRChat нам не помог.

У нас не было возможности вручную запускать анимацию во всех публичных экземплярах, поскольку мы не имели представления о том, сколько экземпляров будет создано и когда, поэтому мы были вынуждены прибегнуть к автоматизации. План был таков: пока 2D-потоковый голографический аватар JMJ исполняет музыку, некоторые автоматические анимации воспроизводятся, пытаясь имитировать запланированное время концерта. Если бы JMJ не соблюдал точное время, автоматика была бы немного рассинхронизирована, но это не должно было стать большой проблемой.

Но тут возникает проблема: мы даже не можем знать, когда были созданы новые экземпляры. То есть: концерт был назначен на 9.15, и если бы кто-то создал экземпляр в 9.15, все было бы синхронизировано. Но как быть с людьми, делающими это в 10.15? Мы не могли дать им такое же время, иначе они увидели бы все с часовой задержкой. А как насчет людей, присоединившихся в 8.15? Они не смогли бы увидеть все раньше остальных, в том числе потому, что могли бы испортить впечатление другим поклонникам Жарра. Мы могли бы добавить для них часовую задержку перед началом анимации, но если бы мы это сделали, то эта задержка распространилась бы на все миры, созданные позже, даже на те, что были созданы в 9.15, миры, для которых анимация должна была начаться немедленно. Резюмируя: что бы мы ни делали, мы делали это неправильно.

**What went wrong?**

Почему же у нас возникли проблемы? Потому что автоматические видео и анимации не срабатывали для многих людей. Триггеры для "поздних участников" в VRChat немного сложны: легко сделать кнопку, которая при нажатии вызывает появление зеркала для вас, и легко сделать кнопку, которая вызывает появление зеркала для вас и других людей в комнате. Но что должно произойти, когда новый человек войдет в комнату, когда вы уже заставили зеркало появиться? Должен ли он/она видеть его или нет? Добро пожаловать в мир буферизованных и небуферизованных событий - очень распространенная тема в многопользовательских играх, из-за которой у нас, разработчиков, возникает много головной боли.

Я не хочу вдаваться в подробности этой технической темы, но скажу лишь, что она очень сложна сама по себе, когда у вас есть полный контроль над исходным кодом, и становится еще сложнее, когда вы используете VRChat. Иногда вы указываете системе вести себя определенным образом для людей, которые присоединяются к миру позже, а потом это не срабатывает, возможно, из-за ошибки, или потому, что VRChat ожидает, что вы будете делать вещи определенным способом, а не тем, который вы использовали.

Это означало, что, скорее всего, первый человек, создавший экземпляр мира концерта, мог видеть все видео и анимации, срабатывающие в нужное время, но у других людей, присоединившихся к нему позже, анимации чаще всего не срабатывали. Поэтому они могли видеть только голограмму JMJ, одну базовую анимацию и все. Они злились, потому что, по сути, смотрели 2D-видео в VR и думали, что впечатления будут именно такими, в то время как они были гораздо лучше. Людям, которые могли видеть все анимации, понравился опыт в публичных мирах, но многие другие, которые ничего не видели, были очень рассержены.

Добавьте к этому тот факт, что мы начали немного позже, так что люди, перезагружающие мир в 9.20, все еще могли видеть сообщение, приглашающее их перезагрузить мир в 9.15, и вы сможете понять, почему на нас так много людей злились.

Я очень сожалею о том, что случилось с теми, у кого не было хорошего опыта. Я сам беру на себя всю ответственность за проблемы с разработкой. Мы совершенствуемся и учимся каждый день, и наверняка в следующий раз мы предоставим вам гораздо лучший опыт.

**Как вы могли бы избежать той же ошибки?**

Корень всех зол кроется в коротком времени, которым мы располагали: у нас почти не было времени на тестирование публичных миров, а в первых тестах они вроде бы работали, поэтому мы были уверены, что с ними все в порядке. Более тщательные тесты выявили бы проблему, так что планируйте заранее, чтобы у вас была хотя бы неделя на тестирование крупных событий.

Что касается триггеров, то сейчас мы обсуждаем с VRChat, как это можно решить в будущем, и мы получили новость, что в любом случае с новым SDK система событий будет улучшена и должна иметь меньше недостатков.

На случай, если вы сделаете что-то подобное, также продумайте план Б. Мы могли бы поставить в комнате большую кнопку, которая могла бы запускать случайные анимации локально для каждого зрителя (чтобы не было общего для жителей одной комнаты), или персональную консоль VJ, чтобы каждый мог запускать анимации по своему усмотрению. Это не было круто в качестве синхронного опыта, но это было бы лучше, чем ничего не видеть: каждый мог бы почувствовать себя виджеем Жана-Мишеля Жарра в качестве плана Б, если бы официальная анимация не работала.

А что касается задержки... немедленно сообщайте о задержках в социальных сетях, а также не пишите точные сроки в своем мире. "Перезагрузка в 9.15 вечера" - плохой выбор, потому что люди будут ожидать, что в 9.15 вечера все будет в порядке, и даже если у вас будет 5 минут задержки, они будут расстроены.

**Внешняя потоковая передача**

Трансляция на Youtube/Facebook прошла очень хорошо. Здесь мы пошли по вполне стандартному пути: в VIP-мире было несколько человек из персонала, которые находились в стратегических точках мира с ПК, и экран их ПК транслировался в сеть. Режиссер стриминга собирал все потоки и решал, что в каждый момент времени выкладывать в прямой эфир на Youtube.

Если вы посмотрите видео на Youtube, то заметите, что это отличная работа. Большинство потоковых видео с мероприятий снимаются одной камерой, и это так скучно, потому что это похоже на просмотр телепередачи, записанной только с одной точки зрения. На этом концерте у нас были разные точки зрения, которые показывались попеременно, а также смешивались с наводящими на размышления образами из видео Винсента Массона. В результате получилось нечто динамичное, свежее и красивое, очень приятное для просмотра. Если вы планируете сделать стриминг на Youtube, помните, что нужно создать что-то, что будет интересно тем, кто это смотрит, и это не просто посредственный план B для тех, у кого нет гарнитуры VR.

**Оптимизация графики**

В этом проекте большое спасибо Виктору Пухову за то, что он оптимизировал всю графику. Когда вы находитесь в VR, вы должны быть в состоянии гарантировать 90 кадров в секунду, поэтому вы должны найти компромисс между тем, что вы хотите увидеть, и тем, что вы можете позволить себе показать. Проблема в том, что если вы хотите предложить отличный опыт с таким великим художником, как JMJ, вы не можете просто показать два летающих куба, а должны продемонстрировать множество визуальных эффектов.

Виктор оптимизировал все сетки, сократив количество полигонов до минимума. Затем он позаботился и о шейдерах, выбрав те, которые не слишком нагружали GPU. Все огни, кроме одного, были запечены, как и отражения. Если вы не начнете оптимизировать графику с первого дня, то в конце концов окажетесь с очень низкой частотой кадров и слишком малым количеством времени, чтобы все переделать.

Кроме оптимизации окружения, не забудьте оптимизировать аватары. Каждый новый пользователь в комнате - это новый аватар, а значит, больше полигонов в сцене. Предложите людям не использовать слишком тяжелые аватары.

Опыт не был доступен для Quest, потому что, несмотря на все оптимизации, было невозможно обеспечить высококачественный опыт с ограниченными возможностями Quest. Это решение далось нам нелегко, но это был единственный возможный выход. Мы не могли испортить опыт для всех остальных пользователей из-за пользователей Quest, и мы не могли разработать параллельный мир только для Quest из-за нехватки времени. Поэтому нам пришлось убить квест.

**Следите за удобством использования, а не только за графикой**

Одна большая ошибка, которую мы допустили, - не сразу поняли, что некоторые объекты интерактивны и что они могут дать. Например, в публичном мире была сфера, которую можно было использовать для синхронизации видео аватара JMJ, но это было совершенно непонятно: если вы видите синюю сферу, вы не думаете "о, это должна быть сфера для синхронизации видео!", вы просто думаете "ах, синяя сфера". Многие люди, которые не могли нормально видеть потоковое видео, не знали, что его можно легко пересинхронизировать, и вечно перезагружали миры, пока не находили рабочий.

VRChat показывает всплывающую подсказку при обрамлении интерактивных объектов, и мы пользовались ею, но вам следует создавать объекты, которые не требуют пояснений: возможно, объект ресинхронизации видео должен показывать что-то о времени или иконку видео. Позаботьтесь не только о том, чтобы объекты визуально вписывались в окружение, но и о том, чтобы их назначение было понятным.

Если у вас есть время, пригласите людей, не имеющих практического опыта работы с VRChat, в ваш мир на предварительный просмотр и посмотрите, как они себя ведут и что делают. Помните старое правило: "UX - это как шутка, если вам приходится ее объяснять, значит, она плохая".

**Тролли будут троллями**

В конце концов, в некоторых публичных инстансах тролли испортили все впечатление. Мы ничего не могли с этим поделать, поскольку публичные инстансы были неподконтрольны никому. Не стоит забывать, что тролли умеют быть очень изобретательными. В одном из публичных инстансов, который я посетил, у одного парня был огромный аватар самого себя, транслирующий свою собственную музыку на высокой громкости и демонстрирующий свои собственные анимации. Иногда он также запускал анимацию, которая была настолько тяжелой, что мир рушился для всех присутствующих. Я был шокирован: как он мог сам показывать все эти анимации на сцене? Как он мог иметь такой большой и опасный аватар, не будучи заблокированным системой?

VRChat уже многое делает для предотвращения троллинга на своей платформе, но я понял: что бы вы ни делали, всегда найдется тролль более изобретательный, чем вы. Помните об этом.

**Маркетинг**

Мы сделали все возможное, чтобы распространить информацию о концерте. Уршула Гляйснер написала пресс-релиз и распространила его повсюду, я связался со всеми известными мне журналистами и влиятельными лицами из VR-пространства (и добился публикации новости на Road To VR и Upload VR, да!), Жан Мишель Жарр привлек внимание своих поклонников, VRrOOm написал множество постов на эту тему, VRChat рассказал о мероприятии... и в итоге мы создали большой шум вокруг него. Помните, что маркетинг имеет фундаментальное значение: если вы сделаете отличное мероприятие, но никто о нем не узнает, вся ваша тяжелая работа окажется бесполезной. Инвестируйте в маркетинг побольше!

**Несколько маленьких курьезов**

**Работа с JMJ**
Некоторые поклонники Жана-Мишеля Жарра спрашивали меня, каково это - работать с ним. Честно говоря, я не знаю: больше всего с ним работали Луи из VRrOOm, Пьер и ребята, которые занимались его трекингом всего тела. Я только общался с ним в двух Zoom-звонках и работал с ним косвенно. В любом случае, он произвел на меня хорошее впечатление за время нашего общения.

**Секретная комната**
В окружении была потайная комната, которая открывала доступ ко всем кулисам. В секретной комнате была система безопасности, защищенная паролем (я очень гордился тем, что разработал ее в VRChat), чтобы активировать все секретные проходы к кулисам. Как бы то ни было, сотрудников бесила необходимость вводить пароль каждый раз, когда им нужно было сделать тесты, поэтому пароль был отключен на все время разработки. В спешке перед публикацией мира мы забыли восстановить защиту паролем, но, к счастью, никто не нашел тайных ходов, иначе он/она могли бы троллить Жана-Мишеля Жарра.

**Спонсорская помощь**
В определенный момент возникла идея добавить в игру рекламу, как это происходит на настоящих концертах. Впоследствии от этой идеи отказались, потому что она могла повредить общему восприятию качества мероприятия. В любом случае, плакат о Ubisoft был добавлен благодаря их поддержке в распространении информации о мероприятии.

**The virtual drugs**
Через несколько дней после начала разработки опыта у кого-то (возможно, у Пьера) возникла идея добавить некоторые специальные эффекты зрения, что-то, что вы могли бы взять и по-другому взглянуть на окружающую среду. Технически говоря, мы говорим об эффектах постобработки, и мы разработали очки, которые могли бы обеспечить такой опыт: Я разработал "код" (не код, а комбинацию триггеров и анимации) для поддержки 4 спецэффектов, а чтобы сделать несколько тестов, я произвольно перемещал бары скрипта Post Process Effect в Unity, чтобы создать 4 демо-эффекта, просто чтобы сделать тесты. Затем я попросил художников разработать 4 спецэффекта для этой цели.

Я и Виктор разработали взаимодействие с четырьмя очками, которые можно было бы надеть, чтобы получить эти особые видения, но затем большинство других людей сказали, что они предпочитают виртуальные наркотики, которые больше соответствуют настроению рейв-вечеринки с электронной музыкой. Мы внесли изменения, хотя мне они показались немного странными.

Самое интересное, что, исправляя одну ошибку за другой, мы совсем забыли о спецэффектах - остались 4 тестовых, которые я сделал за 3 минуты. Когда пришел VRPill из VRChat, он попробовал наши виртуальные наркотики и сказал: "О, так круто, я знаю другие миры в VRChat, которые делают это, и также они тратят ТАКОЕ МНОГО ВРЕМЕНИ НА РАЗРАБОТКУ ЭТИХ СПЕЦИАЛЬНЫХ ЭФФЕКТОВ". Столько времени, да, ну... может быть... кашель кашель... в конце концов, 3 минуты - это много времени, если сравнивать с 1...

В любом случае, виртуальные наркотики понравились всем, кто их попробовал. Иногда мы возлагаем на них такие большие надежды, что не понимаем, что даже простые эффекты могут быть великолепны для людей, которые к ним не привыкли.

**The plan B**
Репетиция шоу была предварительно записана в субботу вечером в VRChat. Мы взяли эту запись в качестве плана Б на случай, если произойдет какая-то катастрофа, например, серверы VRChat упадут в воскресенье вечером. В итоге мы его не использовали, но как совет - всегда рассматривайте план Б. Со мной и VRrOOm уже случалось, что мероприятие не удавалось провести, потому что VRChat обновлял сервер именно в это время (правда, это было очень обидно).

**The final upload**
Этот проект доставил мне много беспокойства, потому что именно я занимался загрузкой. Я собрал все (замечательные) материалы, предоставленные мне другими членами команды, и должен был собрать их в Unity и опубликовать на VRChat. Большая ответственность, учитывая также, что я всегда получал все материалы с небольшим опозданием, и тогда мне приходилось соблюдать сроки. Я до сих пор помню, как Пьер спросил меня, сколько времени мне нужно на выполнение задания, я ответил "30 минут", а он сказал мне "ЧТО? У тебя есть 10".

Когда целая команда людей в разных странах, да еще и легенда электронной музыки, только и ждала, чтобы я завершил их тяжелую работу, это был один из самых напряженных моментов за всю мою трудовую жизнь. С большой властью приходит большая ответственность, а также большой стресс. Но я прошел через это, я должен был это сделать, потому что все эти люди так усердно работали ради этой цели, и они так доверяли мне, что отдали мне эту роль. Но в процессе я, вероятно, потерял 20 лет своей жизни.

**The results**
В целом концерт прошел успешно: все люди в VIP-зале получили удовольствие, а мы - множество комплиментов от них. Люди в публичных залах были немного рассержены из-за проблем, которые я описал выше, но в любом случае мы получили 2500 посещений в VRChat: это было одно из самых успешных мероприятий на платформе. А на Facebook/Youtube в итоге мы получили более 600 000 просмотров. После всей этой боли, стресса и недосыпания мы были очень счастливы, увидев эти результаты. Жан-Мишель Жарр также был очень доволен результатом.

Да, были некоторые проблемы, да, некоторые люди остались недовольны, и нам предстоит многому научиться и многое улучшить. Я очень зол на себя за то, что не смог дать всем тот опыт, которого они заслуживали. Но, как сказал мне кто-то, мы пытались сделать что-то новое и инновационное, а ошибки, глюки, баги - это все равно часть игры. Сейчас виртуальная реальность - это территория безумных экспериментов, где мы все пытаемся продвинуть технологию вперед.

И то, что я был частью проекта, который не только создал что-то новое для VR-концертов, но и дал возможность узнать о виртуальной реальности сотням тысяч людей, делает меня счастливым и заставляет всех нас, членов команды, гордиться тем, что мы сделали. Я лично хочу похвалить всех остальных членов команды этого концерта за отличную работу, которую они проделали, несмотря на критическую ситуацию, в которой мы оказались. А также поблагодарить Луиса Каччуттоло из VRrOOm за то, что он сделал все это возможным.

А чтобы поддержать людей, у которых был неудачный опыт в публичных мирах, мы думаем о создании постоянной инсталляции внутри VRChat с записью того, каким должен был быть полный опыт, чтобы позволить всем насладиться концертом, каким он должен был быть.

Мы уверены, что в следующий раз мы подарим вам лучший опыт, и что я смогу повеселиться с вами, все вместе... но наедине в наших VR-гарнитурах 🙂 .

UPDATE 2020/07/09: Георгий Молодоцов написал очень глубокий комментарий к этой статье, в котором рассказал о других уроках, которые он сам извлек во время организации этого мероприятия. Я приглашаю вас прокрутить страницу вниз и прочитать его 🙂